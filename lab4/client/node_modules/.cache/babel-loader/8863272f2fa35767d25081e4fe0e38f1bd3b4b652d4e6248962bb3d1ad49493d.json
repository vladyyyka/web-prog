{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap';\nimport axios from 'axios';\nimport sunny from '../assets/weather-icons/sunny.png';\nimport cloudy from '../assets/weather-icons/cloudy.png';\nimport rainy from '../assets/weather-icons/rainy.png';\nimport snow from '../assets/weather-icons/snow.png';\nimport fog from '../assets/weather-icons/fog.png';\nimport unknown from '../assets/weather-icons/unknown.png';\nexport default {\n  name: \"WeatherComponent\",\n  data() {\n    return {\n      city: '',\n      weather: null,\n      unit: 'metric',\n      weatherIcons: {\n        'ясно': sunny,\n        'облачно': cloudy,\n        'пасмурно': cloudy,\n        'дождь': rainy,\n        'ливень': rainy,\n        'снег': snow,\n        'туман': fog\n      },\n      favorites: JSON.parse(localStorage.getItem('favorites')) || []\n    };\n  },\n  computed: {\n    weatherIcon() {\n      return this.weather ? this.weatherIcons[this.weather.overcast] || unknown : null;\n    }\n  },\n  methods: {\n    async fetchWeather() {\n      try {\n        const response = await axios.post('http://localhost:5000/weather', {\n          city: this.city,\n          unit: this.unit\n        });\n        this.weather = response.data;\n      } catch (error) {\n        console.error('Ошибка получения погоды:', error);\n      }\n    },\n    async fetchFavoriteWeather(favorite) {\n      this.city = favorite;\n      await this.fetchWeather();\n    },\n    refreshWeather() {\n      this.fetchWeather();\n    },\n    toggleFavorite(city) {\n      const index = this.favorites.indexOf(city);\n      if (index === -1) {\n        this.favorites.push(city);\n      } else {\n        this.favorites.splice(index, 1);\n      }\n      localStorage.setItem('favorites', JSON.stringify(this.favorites));\n    },\n    isFavorite(city) {\n      return this.favorites.includes(city);\n    },\n    removeFromFavorites(index) {\n      this.favorites.splice(index, 1);\n      localStorage.setItem('favorites', JSON.stringify(this.favorites));\n    }\n  }\n};","map":{"version":3,"names":["axios","sunny","cloudy","rainy","snow","fog","unknown","name","data","city","weather","unit","weatherIcons","favorites","JSON","parse","localStorage","getItem","computed","weatherIcon","overcast","methods","fetchWeather","response","post","error","console","fetchFavoriteWeather","favorite","refreshWeather","toggleFavorite","index","indexOf","push","splice","setItem","stringify","isFavorite","includes","removeFromFavorites"],"sources":["C:\\Users\\vladik\\weather-app\\client\\src\\components\\WeatherComponent.vue"],"sourcesContent":["<template>\r\n  <div class=\"weather-app container mt-5\">\r\n    <h1 class=\"text-center mb-4\">Погода в городе</h1>\r\n\r\n    <div class=\"favorites-section mb-4\">\r\n      <h3>Избранные города</h3>\r\n      <ul class=\"list-group\">\r\n        <li\r\n          v-for=\"(favorite, index) in favorites\"\r\n          :key=\"index\"\r\n          class=\"list-group-item d-flex justify-content-between align-items-center\"\r\n        >\r\n          <button @click=\"fetchFavoriteWeather(favorite)\" class=\"btn btn-link\">\r\n            <i class=\"fas fa-city\"></i> {{ favorite }}\r\n          </button>\r\n          <button @click=\"removeFromFavorites(index)\" class=\"btn btn-danger btn-sm remove-btn\">\r\n            <i class=\"fas fa-trash-alt\"></i>\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n\r\n    <div v-if=\"weather\" class=\"weather-info card text-center p-4 mb-4 animated fadeIn\">\r\n      <h2 class=\"city-name\">{{ weather.city }}</h2>\r\n      <i\r\n        class=\"fas fa-star position-absolute star-icon\"\r\n        :class=\"{ 'star-filled': isFavorite(weather.city) }\"\r\n        @click=\"toggleFavorite(weather.city)\"\r\n        style=\"cursor: pointer;\"\r\n      ></i>\r\n      <div class=\"weather-content d-flex justify-content-center align-items-center\">\r\n        <div class=\"left-info\">\r\n          <p class=\"temperature\">\r\n            Температура: <span class=\"font-weight-bold\">{{ weather.temperature }} °{{ unit === 'metric' ? 'C' : 'F' }}</span>\r\n          </p>\r\n          <p class=\"description\">Описание: {{ weather.overcast }}</p>\r\n          <p class=\"humidity\">Влажность: {{ weather.humidity }}%</p>\r\n          <p class=\"wind\">Скорость ветра: {{ weather.wind }} м/с</p>\r\n        </div>\r\n\r\n        <div class=\"icon-container mx-3\">\r\n          <img :src=\"weatherIcon\" alt=\"Weather icon\" class=\"weather-icon\" />\r\n        </div>\r\n\r\n        <div class=\"right-info\">\r\n          <p class=\"sunrise\">Время восхода: {{ new Date(weather.sunrise * 1000).toLocaleTimeString() }}</p>\r\n          <p class=\"sunset\">Время заката: {{ new Date(weather.sunset * 1000).toLocaleTimeString() }}</p>\r\n          <p class=\"timestamp\">Время получения: {{ new Date(weather.timestamp).toLocaleString() }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"search-container text-center mb-4\">\r\n      <form @submit.prevent=\"fetchWeather\" class=\"d-flex justify-content-center align-items-center\">\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"city\"\r\n          placeholder=\"Введите город\"\r\n          required\r\n          class=\"form-control city-input\"\r\n        />\r\n        <div class=\"unit-toggle d-flex align-items-center mx-2\">\r\n          <button type=\"button\" \r\n                  :class=\"['btn', { active: unit === 'metric' }]\" \r\n                  @click=\"unit = 'metric'\">°C</button>\r\n          <button type=\"button\" \r\n                  :class=\"['btn', { active: unit === 'imperial' }]\" \r\n                  @click=\"unit = 'imperial'\">°F</button>\r\n        </div>\r\n        <button type=\"submit\" class=\"btn btn-primary search-button\">\r\n          <i class=\"fas fa-search\"></i>\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-secondary ml-2\" @click=\"refreshWeather\">\r\n          <i class=\"fas fa-sync\"></i>\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap';\r\n\r\nimport axios from 'axios';\r\nimport sunny from '../assets/weather-icons/sunny.png';\r\nimport cloudy from '../assets/weather-icons/cloudy.png';\r\nimport rainy from '../assets/weather-icons/rainy.png';\r\nimport snow from '../assets/weather-icons/snow.png';\r\nimport fog from '../assets/weather-icons/fog.png';\r\nimport unknown from '../assets/weather-icons/unknown.png';\r\n\r\nexport default {\r\n  name: \"WeatherComponent\",\r\n  data() {\r\n    return {\r\n      city: '',\r\n      weather: null,\r\n      unit: 'metric',\r\n      weatherIcons: {\r\n        'ясно': sunny,\r\n        'облачно': cloudy,\r\n        'пасмурно': cloudy,\r\n        'дождь': rainy,\r\n        'ливень': rainy,\r\n        'снег': snow,\r\n        'туман': fog,\r\n      },\r\n      favorites: JSON.parse(localStorage.getItem('favorites')) || [],\r\n    };\r\n  },\r\n  computed: {\r\n    weatherIcon() {\r\n      return this.weather ? this.weatherIcons[this.weather.overcast] || unknown : null;\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchWeather() {\r\n      try {\r\n        const response = await axios.post('http://localhost:5000/weather', {\r\n          city: this.city,\r\n          unit: this.unit,\r\n        });\r\n        this.weather = response.data;\r\n      } catch (error) {\r\n        console.error('Ошибка получения погоды:', error);\r\n      }\r\n    },\r\n    async fetchFavoriteWeather(favorite) {\r\n      this.city = favorite;\r\n      await this.fetchWeather();\r\n    },\r\n    refreshWeather() {\r\n      this.fetchWeather();\r\n    },\r\n    toggleFavorite(city) {\r\n      const index = this.favorites.indexOf(city);\r\n      if (index === -1) {\r\n        this.favorites.push(city);\r\n      } else {\r\n        this.favorites.splice(index, 1);\r\n      }\r\n      localStorage.setItem('favorites', JSON.stringify(this.favorites));\r\n    },\r\n    isFavorite(city) {\r\n      return this.favorites.includes(city);\r\n    },\r\n    removeFromFavorites(index) {\r\n      this.favorites.splice(index, 1);\r\n      localStorage.setItem('favorites', JSON.stringify(this.favorites));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\nbody {\r\n  background: #e8f5e9; /* Легкий зеленый фон */\r\n}\r\n\r\n.weather-app {\r\n  background-color: rgba(255, 255, 255, 0.9); /* Прозрачный белый фон для улучшения читаемости */\r\n  border-radius: 10px;\r\n  padding: 20px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.favorites-section h3 {\r\n  margin-bottom: 15px;\r\n  color: #007bff;\r\n}\r\n\r\n.list-group-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-radius: 5px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.list-group-item:hover {\r\n  background-color: #e1f5fe;\r\n}\r\n\r\n.weather-info {\r\n  position: relative;\r\n  background-color: #ffffff;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.city-name {\r\n  font-size: 2rem; /* Увеличение размера названия города */\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.star-icon {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  font-size: 24px;\r\n}\r\n\r\n.star-filled {\r\n  color: gold;\r\n}\r\n\r\n.unit-toggle {\r\n  margin-left: 10px;\r\n}\r\n\r\n.weather-icon {\r\n  width: 120px; \r\n  height: auto;\r\n}\r\n\r\n.weather-content {\r\n  justify-content: center;\r\n}\r\n\r\n.search-container {\r\n  margin-top: 20px;\r\n}\r\n\r\n.search-container .form-control {\r\n  width: 250px; \r\n  border-radius: 20px;\r\n  border: 1px solid #007bff;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.search-container .btn {\r\n  border-radius: 20px;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #007bff;\r\n  border: none;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background-color: #0056b3; \r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #6c757d;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #5a6268;\r\n}\r\n\r\n.active {\r\n  background-color: #007bff !important;\r\n  color: white !important;\r\n}\r\n\r\n.remove-btn {\r\n  background: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n  color: red;\r\n}\r\n</style>\r\n"],"mappings":";AAiFA,OAAO,sCAAsC;AAC7C,OAAO,WAAW;AAElB,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,KAAI,MAAO,mCAAmC;AACrD,OAAOC,MAAK,MAAO,oCAAoC;AACvD,OAAOC,KAAI,MAAO,mCAAmC;AACrD,OAAOC,IAAG,MAAO,kCAAkC;AACnD,OAAOC,GAAE,MAAO,iCAAiC;AACjD,OAAOC,OAAM,MAAO,qCAAqC;AAEzD,eAAe;EACbC,IAAI,EAAE,kBAAkB;EACxBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,EAAE;MACRC,OAAO,EAAE,IAAI;MACbC,IAAI,EAAE,QAAQ;MACdC,YAAY,EAAE;QACZ,MAAM,EAAEX,KAAK;QACb,SAAS,EAAEC,MAAM;QACjB,UAAU,EAAEA,MAAM;QAClB,OAAO,EAAEC,KAAK;QACd,QAAQ,EAAEA,KAAK;QACf,MAAM,EAAEC,IAAI;QACZ,OAAO,EAAEC;MACX,CAAC;MACDQ,SAAS,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,KAAK;IAC9D,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,WAAWA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACT,OAAM,GAAI,IAAI,CAACE,YAAY,CAAC,IAAI,CAACF,OAAO,CAACU,QAAQ,KAAKd,OAAM,GAAI,IAAI;IAClF;EACF,CAAC;EACDe,OAAO,EAAE;IACP,MAAMC,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMvB,KAAK,CAACwB,IAAI,CAAC,+BAA+B,EAAE;UACjEf,IAAI,EAAE,IAAI,CAACA,IAAI;UACfE,IAAI,EAAE,IAAI,CAACA;QACb,CAAC,CAAC;QACF,IAAI,CAACD,OAAM,GAAIa,QAAQ,CAACf,IAAI;MAC9B,EAAE,OAAOiB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD;IACF,CAAC;IACD,MAAME,oBAAoBA,CAACC,QAAQ,EAAE;MACnC,IAAI,CAACnB,IAAG,GAAImB,QAAQ;MACpB,MAAM,IAAI,CAACN,YAAY,CAAC,CAAC;IAC3B,CAAC;IACDO,cAAcA,CAAA,EAAG;MACf,IAAI,CAACP,YAAY,CAAC,CAAC;IACrB,CAAC;IACDQ,cAAcA,CAACrB,IAAI,EAAE;MACnB,MAAMsB,KAAI,GAAI,IAAI,CAAClB,SAAS,CAACmB,OAAO,CAACvB,IAAI,CAAC;MAC1C,IAAIsB,KAAI,KAAM,CAAC,CAAC,EAAE;QAChB,IAAI,CAAClB,SAAS,CAACoB,IAAI,CAACxB,IAAI,CAAC;MAC3B,OAAO;QACL,IAAI,CAACI,SAAS,CAACqB,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;MACjC;MACAf,YAAY,CAACmB,OAAO,CAAC,WAAW,EAAErB,IAAI,CAACsB,SAAS,CAAC,IAAI,CAACvB,SAAS,CAAC,CAAC;IACnE,CAAC;IACDwB,UAAUA,CAAC5B,IAAI,EAAE;MACf,OAAO,IAAI,CAACI,SAAS,CAACyB,QAAQ,CAAC7B,IAAI,CAAC;IACtC,CAAC;IACD8B,mBAAmBA,CAACR,KAAK,EAAE;MACzB,IAAI,CAAClB,SAAS,CAACqB,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;MAC/Bf,YAAY,CAACmB,OAAO,CAAC,WAAW,EAAErB,IAAI,CAACsB,SAAS,CAAC,IAAI,CAACvB,SAAS,CAAC,CAAC;IACnE;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}